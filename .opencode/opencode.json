{
  "$schema": "https://opencode.ai/config.json",

  "instructions": [
    "OPENCODE.md",
    "CONTRIBUTING.md",
    "CLAUDE.md",
    ".cursorrules",
    "README.md"
  ],

  "hooks": {
    "PreToolUse": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "python3 $PROJECT_DIR/.opencode/hooks/pre_tool_use.py"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "python3 $PROJECT_DIR/.opencode/hooks/post_tool_use.py"
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "python3 $PROJECT_DIR/.opencode/hooks/session_start.py"
          }
        ]
      }
    ],
    "Notification": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "python3 $PROJECT_DIR/.opencode/hooks/context_monitor.py"
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "python3 $PROJECT_DIR/.opencode/hooks/pre_compact.py --backup --verbose"
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "python3 $PROJECT_DIR/.opencode/hooks/user_prompt_submit.py --log-only --store-last-prompt"
          }
        ]
      }
    ]
  },

  "permission": {
    "edit": "allow",
    "bash": {
      "mkdir": "allow",
      "uv": "allow",
      "find": "allow",
      "mv": "allow",
      "grep": "allow",
      "npm": "allow",
      "npx": "allow",
      "pnpm": "allow",
      "yarn": "allow",
      "bun": "allow",
      "ls": "allow",
      "cp": "allow",
      "cat": "allow",
      "docker": "allow",
      "docker-compose": "allow",
      "git status": "allow",
      "git diff": "allow",
      "git log": "allow",
      "git branch": "allow",
      "git checkout": "allow",
      "git add": "allow",
      "git commit": "allow",
      "git pull": "allow",
      "git fetch": "allow",
      "git stash": "allow",
      "git merge": "ask",
      "git push": "ask",
      "git push --force": "deny",
      "git reset --hard": "deny",
      "git clean": "ask",
      "gh": "allow",
      "curl": "allow",
      "wget": "allow",
      "python": "allow",
      "python3": "allow",
      "pip": "allow",
      "pip3": "allow",
      "node": "allow",
      "deno": "allow",
      "cargo": "allow",
      "go": "allow",
      "make": "allow",
      "cmake": "allow",
      "chmod": "allow",
      "touch": "allow",
      "head": "allow",
      "tail": "allow",
      "wc": "allow",
      "sort": "allow",
      "uniq": "allow",
      "diff": "allow",
      "tree": "allow",
      "pwd": "allow",
      "echo": "allow",
      "date": "allow",
      "which": "allow",
      "env": "allow",
      "ruff": "allow",
      "eslint": "allow",
      "prettier": "allow",
      "tsc": "allow",
      "vitest": "allow",
      "jest": "allow",
      "pytest": "allow",
      "rm": "ask",
      "rmdir": "ask",
      "rm -rf": "deny",
      "sudo": "deny",
      "su": "deny",
      "kill -9": "deny",
      "pkill": "deny",
      "killall": "deny",
      "shutdown": "deny",
      "reboot": "deny",
      "dd": "deny",
      "mkfs": "deny",
      "fdisk": "deny"
    },
    "skill": "allow",
    "webfetch": "allow",
    "doom_loop": "ask",
    "external_directory": "ask"
  },

  "mcp": {
    "context7": {
      "type": "remote",
      "url": "https://mcp.context7.com/mcp",
      "enabled": false
    },
    "github": {
      "type": "local",
      "command": ["npx", "-y", "@modelcontextprotocol/server-github"],
      "environment": {
        "GITHUB_PERSONAL_ACCESS_TOKEN": "{env:GITHUB_TOKEN}"
      },
      "enabled": false
    },
    "filesystem": {
      "type": "local",
      "command": ["npx", "-y", "@modelcontextprotocol/server-filesystem", "{env:PROJECT_DIR}"],
      "environment": {},
      "enabled": false
    },
    "memory": {
      "type": "local",
      "command": ["npx", "-y", "@modelcontextprotocol/server-memory"],
      "environment": {},
      "enabled": false
    },
    "sequential-thinking": {
      "type": "local",
      "command": ["npx", "-y", "@modelcontextprotocol/server-sequential-thinking"],
      "environment": {},
      "enabled": false
    },
    "playwright": {
      "type": "local",
      "command": ["npx", "-y", "@anthropic/mcp-playwright"],
      "environment": {},
      "enabled": false
    },
    "exa": {
      "type": "local",
      "command": ["npx", "-y", "exa-mcp-server"],
      "environment": {
        "EXA_API_KEY": "{env:EXA_API_KEY}"
      },
      "enabled": false
    },
    "slack": {
      "type": "local",
      "command": ["npx", "-y", "@modelcontextprotocol/server-slack"],
      "environment": {
        "SLACK_BOT_TOKEN": "{env:SLACK_BOT_TOKEN}"
      },
      "enabled": false
    },
    "notion": {
      "type": "local",
      "command": ["npx", "-y", "@suekou/mcp-notion-server"],
      "environment": {
        "NOTION_API_KEY": "{env:NOTION_API_KEY}"
      },
      "enabled": false
    },
    "postgres": {
      "type": "local",
      "command": ["npx", "-y", "@modelcontextprotocol/server-postgres"],
      "environment": {
        "DATABASE_URL": "{env:DATABASE_URL}"
      },
      "enabled": false
    }
  }
}
